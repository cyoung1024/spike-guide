{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Spike + Loop Wiki This is a step-by-step guide on integrating the Spike client into any branch you're using. By implementing this method you agree to read the file SPIKE_CALIBRATION included in each version of this client (as well as under the Calibration page of this wiki) before proceeding, understand that you are integrating this client at your own risk, and agree not to use this client to make any medical decisions. System Requirements You must have : Xcode 10.2 minimum iOS 12.2 minimum macOS 10.14.3 minimum Most recent version of HomeBrew Most recent version of Carthage Loop Version Requirements The branch you're using must be compatible with Xcode 10.2. For Loop-master, the required code updates were done early March 2019. Loop-omnipod-testing was released after the 10.2 update, and therefore is compatible. Any Loop version you wish to use must be from March 2019 at the latest, or you must do the necessary code edits to make the desired version compatible. A Quick Note About Git and GitHub In order to keep this guide a little cleaner, I'm opting to show you methods that use a fair amount of Terminal. Don't worry, you'll get comfortable with it very quickly. Remember to pay very close attention to where things are marked \"YOUR_USERNAME\" or \"FOLDER_NAME\", for example. Be very careful to change them when necessary. One thing we'll be using frequently is Git. Git is what's called a \"version control system\" ; it helps you organise, manage, and distribute your projects. When you installed the Xcode command line tools, you also installed Git. But just to make sure it all went well, open up Terminal and type git --version . If Git isn't installed, it will prompt you to install it. Git also helps us connect to GitHub via the Terminal. You'll be able to upload things to GitHub all in one go by using this method, which keeps us from making mistakes when using the desktop uploader in GitHub. In order to do this though, we have to use the command git config in Terminal. Here we'll set up the username and e-mail address you wish to associate with your code. This isn't necessarily your GitHub account username or e-mail. You can put your full name, a nickname, or keep your GitHub username if you wish. To configure Git to use your desired name in all git projects, in Terminal type git config --global user.name \"YOUR_USERNAME\" . You can double check that it worked by typing git config --global user.name . To configure Git to your desired e-mail address in all git projects, in Terminal type git config --global user.email \"YOUR@EMAIL.COM\" . You can double check that it worked by typing git config --global user.email . Note that GitHub can also provide you with a custom, no-reply e-mail address. Click here to find out more. Next, we need to tell GitHub that your e-mail that you specified in Terminal is, well, yours. This may already be done if you used the same e-mail in Terminal as the one that is associated with your GitHub, but follow along just to make sure everything is good-to-go. Log into GitHub in your web browser and click on your user icon, found in upper righthand corner of your screen. Click \"settings\", and in the left sidebar, click \"Emails\". In your e-mail addresses, click \"Add\" and type in the e-mail you used in Terminal. Log into your e-mail account to verify your e-mail address with GitHub. In the \"Primary email address\" list, select the email address you'd like to associate with your web-based Git operations. To keep your email address private when performing web-based Git operations, click \"Keep my email address private\". All set ? Let's get started.","title":"Home"},{"location":"#spike-loop-wiki","text":"This is a step-by-step guide on integrating the Spike client into any branch you're using. By implementing this method you agree to read the file SPIKE_CALIBRATION included in each version of this client (as well as under the Calibration page of this wiki) before proceeding, understand that you are integrating this client at your own risk, and agree not to use this client to make any medical decisions.","title":"Spike + Loop Wiki"},{"location":"#system-requirements","text":"You must have : Xcode 10.2 minimum iOS 12.2 minimum macOS 10.14.3 minimum Most recent version of HomeBrew Most recent version of Carthage","title":"System Requirements"},{"location":"#loop-version-requirements","text":"The branch you're using must be compatible with Xcode 10.2. For Loop-master, the required code updates were done early March 2019. Loop-omnipod-testing was released after the 10.2 update, and therefore is compatible. Any Loop version you wish to use must be from March 2019 at the latest, or you must do the necessary code edits to make the desired version compatible.","title":"Loop Version Requirements"},{"location":"#a-quick-note-about-git-and-github","text":"In order to keep this guide a little cleaner, I'm opting to show you methods that use a fair amount of Terminal. Don't worry, you'll get comfortable with it very quickly. Remember to pay very close attention to where things are marked \"YOUR_USERNAME\" or \"FOLDER_NAME\", for example. Be very careful to change them when necessary. One thing we'll be using frequently is Git. Git is what's called a \"version control system\" ; it helps you organise, manage, and distribute your projects. When you installed the Xcode command line tools, you also installed Git. But just to make sure it all went well, open up Terminal and type git --version . If Git isn't installed, it will prompt you to install it. Git also helps us connect to GitHub via the Terminal. You'll be able to upload things to GitHub all in one go by using this method, which keeps us from making mistakes when using the desktop uploader in GitHub. In order to do this though, we have to use the command git config in Terminal. Here we'll set up the username and e-mail address you wish to associate with your code. This isn't necessarily your GitHub account username or e-mail. You can put your full name, a nickname, or keep your GitHub username if you wish. To configure Git to use your desired name in all git projects, in Terminal type git config --global user.name \"YOUR_USERNAME\" . You can double check that it worked by typing git config --global user.name . To configure Git to your desired e-mail address in all git projects, in Terminal type git config --global user.email \"YOUR@EMAIL.COM\" . You can double check that it worked by typing git config --global user.email . Note that GitHub can also provide you with a custom, no-reply e-mail address. Click here to find out more. Next, we need to tell GitHub that your e-mail that you specified in Terminal is, well, yours. This may already be done if you used the same e-mail in Terminal as the one that is associated with your GitHub, but follow along just to make sure everything is good-to-go. Log into GitHub in your web browser and click on your user icon, found in upper righthand corner of your screen. Click \"settings\", and in the left sidebar, click \"Emails\". In your e-mail addresses, click \"Add\" and type in the e-mail you used in Terminal. Log into your e-mail account to verify your e-mail address with GitHub. In the \"Primary email address\" list, select the email address you'd like to associate with your web-based Git operations. To keep your email address private when performing web-based Git operations, click \"Keep my email address private\".","title":"A Quick Note About Git and GitHub"},{"location":"#all-set-lets-get-started","text":"","title":"All set ? Let's get started."},{"location":"build/","text":"Getting Started This client is provided by Bjorn Inge Berg. You can find his work here , and you can find his original instructions here . If you plan on integrating the Spike client into the master branch of Loop ( Medtronic support only, no Omnipod support ), then you can follow this guide with either Bjorn's Spike client or my Spike client. The only difference is that my Spike client version comes with the Spike calibration file. If you plan on integrating the Spike client into a version of Loop that has Omnipod support, then you will need to follow this guide with my Spike client, as changes to the code were made to be compatible with the Omnipod branch. Here are the steps we're going to take : Fork and clone the Spike client Update Cartfile dependencies Carthage update for Spike client Build the Spike client Push changes to GitHub Download a new copy of Loop Update the Cartfile of Loop Carthage update for Loop Add Spike as a CGM source to Loop in Xcode Add the Spike frameworks Link binaries Edit info.plist Build and launch Fork and clone the Spike client You can find my version of the Spike client here . If you wish to integrate the client into a Medtronic-only version of Loop, select the master branch . If you wish to integrate the client into a version that also supports Omnnipod, select the omni branch . You should fork the repository (or \"repo\") before cloning it, so that you have a clear path of documentation that will always lead you back to the source. This will also help you keep up-to-date with potential upstream changes to the branch. First, fork the Spike client. You'll find the button in the top righthand corner of your screen. Next, open Terminal. We're going to download the Spike client via Terminal, as it will make things a little easier and neater in the long run. Follow along below depending on if you're integrating into a Medtronic only branch (left column) or an Omnipod branch (right column). Again, Omnipod branches also support Medtronic, but Medtronic branches are just that - Medtronic only. In Terminal, type : Medtronic Omnipod git clone https://github.com/cyoung1024/spike-client-swift-195 --branch master --single-branch spike-master git clone https://github.com/cyoung1024/spike-client-swift-195 --branch omni --single-branch spike-omni The Spike client folder can be found under Users > \"your name\". It's easier to put the file here when using Terminal because it reduces the amount of typing needed. Instead of cd ~/downloads/spike-master , we can just type cd spike-master . If you prefer a different folder location, feel free to change the working directory by typing cd ~/PATH/TO/FILE and hitting enter before preforming the git clone , so long as iCloud drive won't be uploading its contents anywhere. If you do this, just remember to navigate into that directory when following the next steps. Update Cartfile dependencies Loop and almost all its elements are constituted of many different projects. These projects lay down the proper foundation for Loop to build successfully. For example, the project LoopKit is fundamental in Loop's inner-workings. Elements such as RileyLink, the Dexcom share client, and the Spike client rely upon it, depend upon it, in order to function properly. These dependencies are declared in what's called the Cartfile. Here we tell Carthage, the dependency manager, where to go on GitHub to find these constituting elements of Loop. Carthage then fetches that information from GitHub, clones it onto your computer, and then builds it. The result of this is also logged into the Cartfile.resolved. Those very long numbers you see at the end of each declared dependency are what we call a SHA-1. It's like a fingerprint - each one is unique, and is attributed to the version of the dependency you told Carthage to go get. This can help us make sure that we've gone and gotten the right version when we want to be vigilant, but don't worry about that for now. Because we want Loop to also depend upon the Spike client, we have to edit the Cartfile and tell Carthage where to go get it so it can import the Spike client. If you open the Spike client's Cartfile, you'll notice it has only one dependency : LoopKit. LoopKit also has its own versions, just like the master branch and the Omnipod branch. We want our Spike client to have the right framework to function properly with the intended version of Loop, so we want to tell the Spike client to use the same version of LoopKit that Loop does . Double check in Loop's Cartfile where Carthage should be fetching LoopKit from. For example, in the Omnipod branch, it should be github \"LoopKit/LoopKit\" \"omnipod-testing\" (well, at the time of writing this it should be). Copy that into the Spike client's Cartfile, then save and exit. Do the same for the Cartfile.resolved. Note that you may have to right click on the Cartfile or the Cartfile.resolved in order to open it with TextEdit. TextEdit is usually the default editor for the Cartfile, but often the default editor for the Cartfile.resolved is Xcode. Try and be consistent with the editor you use when appending the Cartfiles. Carthage update for Spike client Time to tell Carthage to do its thing. In Terminal, type : Medtronic Omnipod cd spike-master && carthage update cd spike-omni && carthage update If you get any errors, type rm -rf ~/Library/Caches/org.carthage.CarthageKit and then rm -rf ~/Library/Developer/Xcode/DerivedData . Terminal should not tell you anything after you type these out. If you still get an error, Carthage should tell you what went wrong, but often much too vaguely to do anything about it. At the end of its message, it'll tell you that you can \"check the log\" at /var/folders/... . Highlight this with your curser and copy it with command+c , then type open , paste the file path with command+v , and hit enter. You'll get a detailed log as to what's happening and where to fix it. Build the Spike client Once Carthage finishes its work, go ahead and open up the Spike client's Xcode project - SpikeClient.xcodeproj . Build the project by clicking on the play button. You won't need to plug in your phone or assign any targets, the deploy device can be anything from a specific simulator to a generic device. No UI interface will come up, and you should get a message saying the build succeeded. If the build didn't succeed, check the log to find out what went wrong. You can troubleshoot from there. Some things to try : Go back to your Cartfile and make sure that the LoopKit dependency you declared definitely matches the one that your desired version of Loop is using. If it isn't, update it, be sure to save, and run another Carthage update. If you're getting messages such as Type [foo] does not conform to protocol [bar] , or Use of unresolved identifier , that's a little more of a pain in the butt. You're unfortunately going to have to open up the Dexcom-share-client-swift of the desired Loop project, and check in there for compatibility. For example, in the picture below you have the Dexcom-share-client-swift's ShareClient+UI.swift file on the left, and on the right is the Spike-client-swift's SpikeClient+UI.swift . When I was converting the Spike client to its Omnipod version, I ran into a myriad of unresolved identifiers and non-conforming types. Because I knew the Spike client is almost identical to the Dexcom share client, I opened the two up side-by-side and compared the files and lines that Xcode gave me errors on. This is just one example of something that needed to be changed. Push changes to GitHub This is the fun part. Ready ? In Terminal, type : Medtronic Omnipod cd spike-master cd spike-omni git init git init git add . git add . git commit -m \"Update Spike client\" git commit -m \"Update Spike client\" git remote add origin https://github.com/YOUR_USERNAME_HERE/spike-client-swift-195 git remote add origin https://github.com/YOUR_USERNAME_HERE/spike-client-swift-195 git remote -v (make sure the URLs match) git remote -v (make sure the URLs match) git push -set-upstream origin my-master git push --set-upstream origin my-omni In the last step, my-master and my-omni are the names of the new branches - of your new branch. If you wish to name them something else, like for example to have consistency with the specific version of Loop you're integrating into, you can name it something like dev or jojo . If Terminal tells you the origin already exists when preforming the step git remote add origin <url> , type git remote rm origin , then do the step git remote add origin <url> again. Congratulations, you just uploaded to GitHub via Terminal ! Pretty cool, right ? As a refresher, we did this because Carthage needs to know where to go to find things. So, when you want to put the Spike client into Loop, you can now put your Spike client's GitHub URL in the Cartfile, and Carthage will go get it and build it into Loop. But first, we need a fresh copy of Loop. Download a new copy of Loop To make sure we're starting out fresh with no issues, grab a new copy of the version of Loop you're going to use. Remember, the LoopKit version of the Loop you want has to be the same as the Spike client we just pushed to GitHub. If they don't match, no worries ! Just change the Spike client's Cartfile to the correct LoopKit version, run another Carthage update, and push your changes to GitHub with the method we just used. You can either download your new copy of Loop with the ZIP file method, or we can do the same thing we did earlier with the Spike client : fork Loop (if you never had before), open up Temrinal, and git clone it. To git clone Loop's dev branch, for example, you would type : git clone https://github.com/LoopKit/loop --branch dev --single-branch dev Update the Cartfile of Loop Now we have to tell Carthage where to go. In the Cartfile of your Loop version, type : github \"YOUR_USERNAME/spike-client-swift-195\" \"YOUR_SPIKE_BRANCH'S_NAME\" Save, quit, and do the same in the Cartfile.resolved. Carthage update for Loop Now we have to run another Carthage update. Depending on whether you git cloned or downloaded the ZIP file of your Loop version, the Carthage update command will change. git cloned downloaded ZIP cd FOLDER_NAME && carthage update cd ~/downloads/FOLDER_NAME && carthage update Add Spike as a CGM source to Loop in Xcode Open up your Loop folder and open the Loop project. In the project manager pane on the lefthand side of your screen, navigate into Loop > Managers > CGMManager.swift. At the top of the file, you'll see a bunch of frameworks being imported via the declaration import LoopKit , or import ShareClient . We also want to import something : the Spike client. Click at the end of the last framework being imported, hit enter, and type import SpikeClient . A little further down you'll notice the constant allCGMManagers being delcared, with the required syntax being CGMManager.Type . Add Spike to the list by typing : SpikeClientManager.self . Add the Spike frameworks Time to use the Spike frameworks that Carthage went and got for us. At the top of the project manager pane you'll see \"Loop\" with the Xcode project symbol next to it. Click on that. Along the top of the screen, right under the name of the project, you'll see a range of tabs listed horizontally, such as \"General\", \"Capabilities\", \"Resource tags\"... Find \"Build Phases\" and click on it. You'll see a list of options appear. Near the bottom you'll see \"Copy Frameworks with Carthage\". Click on that. Under \"Input Files\", you'll see a bunch of things that start with $SCROOT/Carthage/Build . All of those files are the frameworks that we asked Carthage to get. We're going to add the Spike client and its UI onto the list, so that Loop can access the files while it's building and running. Click on the + and type : $SCROOT/Carthage/Build/iOS/SpikeClient.framework $SCROOT/Carthage/Build/iOS/SpikeClientUI.framework Link binaries We've added a reference into the CGM manager, added a reference to the frameworks, now all we have left is to link the files themselves into Loop. Under that same \"Build Phases\" tab you'll also see \"Link Binary With Libraries\". Click on that, and scroll down to the + button. You'll be asked to select the files. We're looking for that same SpikeClient.framework and SpikeClientUI.framework we just referenced in the last step. Click Add other... and navigate into your Loop folder. Go into Carthage > Build > iOS and scroll all the way down until you find the SpikeClient.framework and the SpikeClientUI.framework . Select the .framework , not the .framework.dSYM . We want the one whose icon kind of looks like a Lego. You can select both the SpikeClient and the SpikeClientUI at the same time by holding down shift and clicking on the second file as well. Click open . Your frameworks should both be on the list now. Double, triple, quadruple check that they're both there if you did the shift+click method. Yes, I'm speaking from experience. It took me almost three hours to realize why it wasn't working. Edit info.plist Almost done ! We need to edit the version of Loop you're using so that, if you ever need help, you and everyone can be certain of the branch of Loop that's being used. Since you added in the Spike client, we need to denote that. The easiest way, in my humble opinion, is just going to the targets (i.e. Loop and WatchApp) and editing the version from there. Click on the target, and under General > Identity > Version, and add -spike . The info.plist will automatically update to reflect your changes. You can make sure it did by navigating into Loop > info.plist, and WatchApp > info.plist. Note that in the Omnipod branches, you'll also have to do this for the Learn target. Make sure to check that as well. Build and launch Yes, finally build and launch ! Assign all your targets, select your phone in the active scheme, make sure your screen is left on, and hit play. Remember, if you run into any troubles, click on the red errors and scroll all the way down to see what's happening. Just like in Terminal during a carthage update, a log will be printed, so if Xcode isn't detailed enough you can highlight the log's path, open Terminal, type open , paste, and enter to find out more. Pat yourself on the back ! I hope this guide was clear and that maybe, just maybe, you enjoyed doing this. If you'd like to learn more about Xcode, Swift, Git, and more, check out the Resources tab at the top of the page. Happy looping !","title":"Build"},{"location":"build/#getting-started","text":"This client is provided by Bjorn Inge Berg. You can find his work here , and you can find his original instructions here . If you plan on integrating the Spike client into the master branch of Loop ( Medtronic support only, no Omnipod support ), then you can follow this guide with either Bjorn's Spike client or my Spike client. The only difference is that my Spike client version comes with the Spike calibration file. If you plan on integrating the Spike client into a version of Loop that has Omnipod support, then you will need to follow this guide with my Spike client, as changes to the code were made to be compatible with the Omnipod branch. Here are the steps we're going to take : Fork and clone the Spike client Update Cartfile dependencies Carthage update for Spike client Build the Spike client Push changes to GitHub Download a new copy of Loop Update the Cartfile of Loop Carthage update for Loop Add Spike as a CGM source to Loop in Xcode Add the Spike frameworks Link binaries Edit info.plist Build and launch","title":"Getting Started"},{"location":"build/#fork-and-clone-the-spike-client","text":"You can find my version of the Spike client here . If you wish to integrate the client into a Medtronic-only version of Loop, select the master branch . If you wish to integrate the client into a version that also supports Omnnipod, select the omni branch . You should fork the repository (or \"repo\") before cloning it, so that you have a clear path of documentation that will always lead you back to the source. This will also help you keep up-to-date with potential upstream changes to the branch. First, fork the Spike client. You'll find the button in the top righthand corner of your screen. Next, open Terminal. We're going to download the Spike client via Terminal, as it will make things a little easier and neater in the long run. Follow along below depending on if you're integrating into a Medtronic only branch (left column) or an Omnipod branch (right column). Again, Omnipod branches also support Medtronic, but Medtronic branches are just that - Medtronic only. In Terminal, type : Medtronic Omnipod git clone https://github.com/cyoung1024/spike-client-swift-195 --branch master --single-branch spike-master git clone https://github.com/cyoung1024/spike-client-swift-195 --branch omni --single-branch spike-omni The Spike client folder can be found under Users > \"your name\". It's easier to put the file here when using Terminal because it reduces the amount of typing needed. Instead of cd ~/downloads/spike-master , we can just type cd spike-master . If you prefer a different folder location, feel free to change the working directory by typing cd ~/PATH/TO/FILE and hitting enter before preforming the git clone , so long as iCloud drive won't be uploading its contents anywhere. If you do this, just remember to navigate into that directory when following the next steps.","title":"Fork and clone the Spike client"},{"location":"build/#update-cartfile-dependencies","text":"Loop and almost all its elements are constituted of many different projects. These projects lay down the proper foundation for Loop to build successfully. For example, the project LoopKit is fundamental in Loop's inner-workings. Elements such as RileyLink, the Dexcom share client, and the Spike client rely upon it, depend upon it, in order to function properly. These dependencies are declared in what's called the Cartfile. Here we tell Carthage, the dependency manager, where to go on GitHub to find these constituting elements of Loop. Carthage then fetches that information from GitHub, clones it onto your computer, and then builds it. The result of this is also logged into the Cartfile.resolved. Those very long numbers you see at the end of each declared dependency are what we call a SHA-1. It's like a fingerprint - each one is unique, and is attributed to the version of the dependency you told Carthage to go get. This can help us make sure that we've gone and gotten the right version when we want to be vigilant, but don't worry about that for now. Because we want Loop to also depend upon the Spike client, we have to edit the Cartfile and tell Carthage where to go get it so it can import the Spike client. If you open the Spike client's Cartfile, you'll notice it has only one dependency : LoopKit. LoopKit also has its own versions, just like the master branch and the Omnipod branch. We want our Spike client to have the right framework to function properly with the intended version of Loop, so we want to tell the Spike client to use the same version of LoopKit that Loop does . Double check in Loop's Cartfile where Carthage should be fetching LoopKit from. For example, in the Omnipod branch, it should be github \"LoopKit/LoopKit\" \"omnipod-testing\" (well, at the time of writing this it should be). Copy that into the Spike client's Cartfile, then save and exit. Do the same for the Cartfile.resolved. Note that you may have to right click on the Cartfile or the Cartfile.resolved in order to open it with TextEdit. TextEdit is usually the default editor for the Cartfile, but often the default editor for the Cartfile.resolved is Xcode. Try and be consistent with the editor you use when appending the Cartfiles.","title":"Update Cartfile dependencies"},{"location":"build/#carthage-update-for-spike-client","text":"Time to tell Carthage to do its thing. In Terminal, type : Medtronic Omnipod cd spike-master && carthage update cd spike-omni && carthage update If you get any errors, type rm -rf ~/Library/Caches/org.carthage.CarthageKit and then rm -rf ~/Library/Developer/Xcode/DerivedData . Terminal should not tell you anything after you type these out. If you still get an error, Carthage should tell you what went wrong, but often much too vaguely to do anything about it. At the end of its message, it'll tell you that you can \"check the log\" at /var/folders/... . Highlight this with your curser and copy it with command+c , then type open , paste the file path with command+v , and hit enter. You'll get a detailed log as to what's happening and where to fix it.","title":"Carthage update for Spike client"},{"location":"build/#build-the-spike-client","text":"Once Carthage finishes its work, go ahead and open up the Spike client's Xcode project - SpikeClient.xcodeproj . Build the project by clicking on the play button. You won't need to plug in your phone or assign any targets, the deploy device can be anything from a specific simulator to a generic device. No UI interface will come up, and you should get a message saying the build succeeded. If the build didn't succeed, check the log to find out what went wrong. You can troubleshoot from there. Some things to try : Go back to your Cartfile and make sure that the LoopKit dependency you declared definitely matches the one that your desired version of Loop is using. If it isn't, update it, be sure to save, and run another Carthage update. If you're getting messages such as Type [foo] does not conform to protocol [bar] , or Use of unresolved identifier , that's a little more of a pain in the butt. You're unfortunately going to have to open up the Dexcom-share-client-swift of the desired Loop project, and check in there for compatibility. For example, in the picture below you have the Dexcom-share-client-swift's ShareClient+UI.swift file on the left, and on the right is the Spike-client-swift's SpikeClient+UI.swift . When I was converting the Spike client to its Omnipod version, I ran into a myriad of unresolved identifiers and non-conforming types. Because I knew the Spike client is almost identical to the Dexcom share client, I opened the two up side-by-side and compared the files and lines that Xcode gave me errors on. This is just one example of something that needed to be changed.","title":"Build the Spike client"},{"location":"build/#push-changes-to-github","text":"This is the fun part. Ready ? In Terminal, type : Medtronic Omnipod cd spike-master cd spike-omni git init git init git add . git add . git commit -m \"Update Spike client\" git commit -m \"Update Spike client\" git remote add origin https://github.com/YOUR_USERNAME_HERE/spike-client-swift-195 git remote add origin https://github.com/YOUR_USERNAME_HERE/spike-client-swift-195 git remote -v (make sure the URLs match) git remote -v (make sure the URLs match) git push -set-upstream origin my-master git push --set-upstream origin my-omni In the last step, my-master and my-omni are the names of the new branches - of your new branch. If you wish to name them something else, like for example to have consistency with the specific version of Loop you're integrating into, you can name it something like dev or jojo . If Terminal tells you the origin already exists when preforming the step git remote add origin <url> , type git remote rm origin , then do the step git remote add origin <url> again. Congratulations, you just uploaded to GitHub via Terminal ! Pretty cool, right ? As a refresher, we did this because Carthage needs to know where to go to find things. So, when you want to put the Spike client into Loop, you can now put your Spike client's GitHub URL in the Cartfile, and Carthage will go get it and build it into Loop. But first, we need a fresh copy of Loop.","title":"Push changes to GitHub"},{"location":"build/#download-a-new-copy-of-loop","text":"To make sure we're starting out fresh with no issues, grab a new copy of the version of Loop you're going to use. Remember, the LoopKit version of the Loop you want has to be the same as the Spike client we just pushed to GitHub. If they don't match, no worries ! Just change the Spike client's Cartfile to the correct LoopKit version, run another Carthage update, and push your changes to GitHub with the method we just used. You can either download your new copy of Loop with the ZIP file method, or we can do the same thing we did earlier with the Spike client : fork Loop (if you never had before), open up Temrinal, and git clone it. To git clone Loop's dev branch, for example, you would type : git clone https://github.com/LoopKit/loop --branch dev --single-branch dev","title":"Download a new copy of Loop"},{"location":"build/#update-the-cartfile-of-loop","text":"Now we have to tell Carthage where to go. In the Cartfile of your Loop version, type : github \"YOUR_USERNAME/spike-client-swift-195\" \"YOUR_SPIKE_BRANCH'S_NAME\" Save, quit, and do the same in the Cartfile.resolved.","title":"Update the Cartfile of Loop"},{"location":"build/#carthage-update-for-loop","text":"Now we have to run another Carthage update. Depending on whether you git cloned or downloaded the ZIP file of your Loop version, the Carthage update command will change. git cloned downloaded ZIP cd FOLDER_NAME && carthage update cd ~/downloads/FOLDER_NAME && carthage update","title":"Carthage update for Loop"},{"location":"build/#add-spike-as-a-cgm-source-to-loop-in-xcode","text":"Open up your Loop folder and open the Loop project. In the project manager pane on the lefthand side of your screen, navigate into Loop > Managers > CGMManager.swift. At the top of the file, you'll see a bunch of frameworks being imported via the declaration import LoopKit , or import ShareClient . We also want to import something : the Spike client. Click at the end of the last framework being imported, hit enter, and type import SpikeClient . A little further down you'll notice the constant allCGMManagers being delcared, with the required syntax being CGMManager.Type . Add Spike to the list by typing : SpikeClientManager.self .","title":"Add Spike as a CGM source to Loop in Xcode"},{"location":"build/#add-the-spike-frameworks","text":"Time to use the Spike frameworks that Carthage went and got for us. At the top of the project manager pane you'll see \"Loop\" with the Xcode project symbol next to it. Click on that. Along the top of the screen, right under the name of the project, you'll see a range of tabs listed horizontally, such as \"General\", \"Capabilities\", \"Resource tags\"... Find \"Build Phases\" and click on it. You'll see a list of options appear. Near the bottom you'll see \"Copy Frameworks with Carthage\". Click on that. Under \"Input Files\", you'll see a bunch of things that start with $SCROOT/Carthage/Build . All of those files are the frameworks that we asked Carthage to get. We're going to add the Spike client and its UI onto the list, so that Loop can access the files while it's building and running. Click on the + and type : $SCROOT/Carthage/Build/iOS/SpikeClient.framework $SCROOT/Carthage/Build/iOS/SpikeClientUI.framework","title":"Add the Spike frameworks"},{"location":"build/#link-binaries","text":"We've added a reference into the CGM manager, added a reference to the frameworks, now all we have left is to link the files themselves into Loop. Under that same \"Build Phases\" tab you'll also see \"Link Binary With Libraries\". Click on that, and scroll down to the + button. You'll be asked to select the files. We're looking for that same SpikeClient.framework and SpikeClientUI.framework we just referenced in the last step. Click Add other... and navigate into your Loop folder. Go into Carthage > Build > iOS and scroll all the way down until you find the SpikeClient.framework and the SpikeClientUI.framework . Select the .framework , not the .framework.dSYM . We want the one whose icon kind of looks like a Lego. You can select both the SpikeClient and the SpikeClientUI at the same time by holding down shift and clicking on the second file as well. Click open . Your frameworks should both be on the list now. Double, triple, quadruple check that they're both there if you did the shift+click method. Yes, I'm speaking from experience. It took me almost three hours to realize why it wasn't working.","title":"Link binaries"},{"location":"build/#edit-infoplist","text":"Almost done ! We need to edit the version of Loop you're using so that, if you ever need help, you and everyone can be certain of the branch of Loop that's being used. Since you added in the Spike client, we need to denote that. The easiest way, in my humble opinion, is just going to the targets (i.e. Loop and WatchApp) and editing the version from there. Click on the target, and under General > Identity > Version, and add -spike . The info.plist will automatically update to reflect your changes. You can make sure it did by navigating into Loop > info.plist, and WatchApp > info.plist. Note that in the Omnipod branches, you'll also have to do this for the Learn target. Make sure to check that as well.","title":"Edit info.plist"},{"location":"build/#build-and-launch","text":"Yes, finally build and launch ! Assign all your targets, select your phone in the active scheme, make sure your screen is left on, and hit play. Remember, if you run into any troubles, click on the red errors and scroll all the way down to see what's happening. Just like in Terminal during a carthage update, a log will be printed, so if Xcode isn't detailed enough you can highlight the log's path, open Terminal, type open , paste, and enter to find out more.","title":"Build and launch"},{"location":"build/#pat-yourself-on-the-back","text":"I hope this guide was clear and that maybe, just maybe, you enjoyed doing this. If you'd like to learn more about Xcode, Swift, Git, and more, check out the Resources tab at the top of the page. Happy looping !","title":"Pat yourself on the back !"},{"location":"calibration/","text":"Important : about Spike calibration It is imperative to read this document in its entirety before installing and using this Spike client. It is also highly recommended to refer to it regularly. A Google doc version is available here , and should be bookmarked for future reference. As Loop users, we understand the importance of accurate data. This rings especially true for calibrations done via the Spike app, whose calibration process is of different nature than those of Dexcom and xDrip, for example. The Dexcom app uses what is called \u201cnative calibration\u201d, which means that it does not calibrate the values in-app. Dexcom sends the user-specified calibration number to the transmitter, who then in turn applies the calibration itself, using Dexcom\u2019s code that resides inside the transmitter. In this case, the Dexcom transmitter algorithm is time-aware, so \u201cpresoaking\u201d a sensor can cause inaccuracies in the algorithm. This, however, does not apply to Spike. While xDrip supports using Dexcom\u2019s in-transmitter algorithm, Spike does not. Spike calibrates in-app and uses raw data collected from the sensor, be it a Dexcom sensor or a Libre sensor. \u201cPresoaking\u201d in Spike therefore has a positive effect rather than a negative one, as Dexcom\u2019s time-aware algorithm does not enter into the Spike equation. Another very important difference to be aware of is that Spike uses every single calibration entered into the app. This effectively means that if you add too many variables into the equation, it gets harder to solve and the results can be messy. Meaning, the more calibrations you enter, the more clogged up the algorithm gets. With other apps, you can \u201ccalibrate your way out of trouble\u201d, as not every single data point is conserved over time. This is not the case with Spike, and attempting to calibrate your way out of a bad situation only aggravates it. What follows is a calibration guide written by one of Spike\u2019s administrators, Robert Bliss. I can personally confirm that this way of calibrating my Libre sensor works for me personally, and as Robert mentions as well, this is what works for him. This is by no means an absolute truth, as everyone is different, but it is important to note, in detail, what the Spike app and its algorithm is expecting from us as users. The permalink to the original post can be found here . Introduction So \u2013 kicking things off with a bold statement\u2026 Good calibration is the key to getting Spike to be accurate. Calibrate well, and I find that Spike reflects my levels accurately (remembering that there is always a lag between my blood glucose levels and my interstitial fluid glucose levels that my sensor measures). Calibrate incorrectly and I\u2019ve found I will make things worse rather than better. There is logic as to how and when to calibrate which is discussed below \u2013 yes, this post goes on a bit but as with many things, the detail is important. The Cornerstones Of Good Calibration First, for me there are three cornerstones of good calibration \u2013 to be level, to be stable and to be in range. Level Taking being level first. I make sure that I\u2019m level when calibrating. That\u2019s not just when Spike\u2019s directional arrow is horizontal - that just reflects the levels for the last 5 minutes ideally one should try to be level for at least 15 minutes to do a proper calibration. Spike can be set to alert the user when this is approximately the case, but I've found for me that when I impose my own stricter criteria of being stable for longer than this (ideally 25-30 minutes) my calibrations are more valid and accurate. The reason for this is that there is a lag between the interstitial fluid that a sensor takes my glucose level from, and blood sugar levels that my finger prick meter reads. I usually take this as approximately 15 minutes, but I\u2019ve read it quoted as anything up to 30 minutes, and I don\u2019t doubt that this lag varies both from person to person, and in different conditions. So, when you view your levels in Spike, you're actually time travelling, in that you\u2019re seeing what your blood sugar levels were approximately 15 minutes or so ago. Other blood glucose monitoring systems use a partial predictive algorithm to try to get around this with varying degrees of success, but (unless you have a DeLorean with a flux capacitor) the lag will always be there. So, how best then to ensure that your blood sugars match your interstitial fluid glucose? Spike works on the basis that if the sensor is showing that you've been level for the last 15 or so minutes (and ideally longer) then you've remained stable too for the time lag between your interstitial fluid and your blood sugar, and therefore the blood and interstitial fluid levels will be aligned (\u2026hopefully). That's why I make sure I\u2019m level when calibrating. Stable However, I may be level, but am I stable? Level reflects the last period of time you can see on your Spike graph, but stability will affect that pesky lag between what Spike shows, and what the blood glucose meter reads from your finger prick test. Think of it like this, you may have been exercising. You may just have eaten. You may have just awoken after lying on your sensor, causing a \u2018compression low\u2019 (a false low reading caused by the pressure applied to the sensor displacing the interstitial fluid that the sensor filament reads). You may just have injected/bolused. You may have just had a hot bath or shower... Hell, you may even just have had a strong black coffee with no carbs but a shed load of caffeine. Your boss may have just told you that they need that report by the end of the day not the end of the week, so your stress levels have gone through the roof (that\u2019s probably why you had the coffee!) You may be on other medications for other conditions that might be just kicking in. You may feel upset or angry about something. You may have just poured yourself a beer or a glass of wine (you deserve it after finishing that report!) You may be coming down with a bug. All these things affect blood sugars... as do a ton of other criteria. Whilst some of these are unavoidable, I try to my best to minimise them before I calibrate - so I don't eat, bolus, inject, exercise, crack open a beer... and I try to hide from my boss. This is why it's important that even if I\u2019m level, I need to minimise anything that could affect levels prior to calibrating and ensure I\u2019m stable In Range Last one of the calibration trinity \u2013 being in optimal range. As a diabetic, I may be high or low at various points. That's not necessarily an issue in the context of calibration \u2013 if still in range it can be a good thing (more on that later), however when in hypo, and when higher than approximate optimal range (so say approximately under 4mmol or 72mg/dl, or over 11 mmol, or 198 mg/dl) I know my interstitial sensors can become less accurate. I believe this is why the advice from Dexcom and Abbott is to always confirm a high or low reading with a finger prick test, and why it's important to resist the temptation to calibrate when you or your child has a low or high and Spike hasn't reflected that in its readings (not to mention that sugars are probably not level then either). So for me it makes sense that whilst within range is the optimal time to calibrate. But What If I\u2019m Not Level, Stable Or In Range? Well, ideally I wait until I am \u2013 however when I start a new sensor isn\u2019t always at a moment of my choosing, and the initial calibration Spike will ask is mandatory \u2013 Spike won\u2019t work without it. What to do here? This is where Miguel has given Spikers a reset option that I frequently use. If I\u2019m not level stable and in range, I do what I need to do to get the sensor going and add to Spike the calibration from my blood test meter as best I can. Then, later on when I do meet the trinity of conditions referred to above, in Spike I go to Menu > Sensor and delete all calibrations. That resets everything, and means that Spike will prompt me to input another calibration. I enter that and hopefully that gets me back on the right path. Calibration\u2026 When, How And What With? Ok \u2013 so that explains the level, stable and in range thing\u2026. but specifically when and how should one calibrate? Ideally assuming I\u2019m level, stable and in range, and If I\u2019ve pre-soaked a sensor then I\u2019m good to go? Yes, probably - but there are a few more things to consider\u2026. All Blood Glucose Meters Are Not Born Equal Consider what blood glucose meter you\u2019re using and its accuracy? Unfortunately, even those meters that claim a high degree of accuracy have a margin of error. For those of us who used meters for years before CGM, we were very used to never questioning meter accuracy as we\u2019ve always taken it for red that it\u2019s bang on, but in reality this isn\u2019t the case. Some meters are better that others, and I\u2019ve done my research as to what meters have a smaller margin of error (I use a Contour Next One). Before making a choice, I check out what various meter\u2019s MARD is (MARD = Mean Absolute Relative Difference). Whilst this isn\u2019t perfect, I used it to determine where in the range of accuracy my potential meter sits. I\u2019ve added a table in the comments below which was passed on to me by a dia-buddy, and was originally posted on the MM FB group. This shows the range of accuracy used in meeting ISO standard ISO15197:2013 and it tells its own tale. Remember that any inaccuracy entered from a meter will be introduced to Spike, so make it your business to make sure your meter\u2019s a good one! Why Not Just Use Dex #Receiver Or Libre Reader / Librelink App To Calibrate With? If I don\u2019t have my blood glucose meter to hand\u2026 that\u2019s ok though because I have my Dexcom receiver and/or Libre reader / Librelink app \u2013 why not just use that? I\u2019ll stop you there. Whatever you do, don\u2019t use a device that already uses an algorithm, to then calibrate Spike\u2019s algorithm. Why not? Because you\u2019re introducing potentially a greater margin of error into the method of aligning your levels, and as Spike uses line confidence (or slope confidence) you\u2019re effectively introducing a compounded inaccurate algorithm output into the proceedings\u2026 or put more simply, you\u2019re potentially multiplying the margin of error by two! The Libre is partially predictive in the way it calculates your sugar levels. In order to get around the lag it takes the last readings and predicts where it thinks you\u2019ll be in 15 or so minutes time. Libre also has a temperature gauge and adjusts out for example a high from where you have a hot shower for 5 minutes. The Dex systems also applies its own algorithm to values, and again both of these systems both have a different way of calculating glucose levels than that Spike uses, as well as their own margin of error. When you add this native Dex/Libre algorithm to that already in Spike you usually make things less accurate, not more so. Simply put, if you\u2019ve ever played the game \u2018Chinese Whispers\u2019 then you\u2019ll understand that offsetting information at each step can result in a mess at the end. Chinese Whispers is a kid\u2019s game here in the UK where one child whispers something into the next one\u2019s ear, and that goes down a chain of however many children until the last one has to say it out loud. The idea is that the same word or phrase goes all the way along, but invariably someone mishears, or decides to amend the whisper slightly with hilarious consequences\u2026 In this case, adding in Libre or Dex algorithm is like adding my nephew into the middle of that line of children \u2013 there\u2019s a chance it\u2019ll be fine, but my money would be on that he\u2019ll change things to affect the outcome! Olympic Finger Pricking Then there\u2019s the actual process of finger pricking - again, for those who did this pre CGM, were very used to doing finger pricking on the fly and it\u2019s sometimes difficult to get out of that habit... yes, I know what the medical professionals told us about how to finger prick, and we all nod along sagely, but in reality life wasn\u2019t like that and if any of you are like me, we just checked quickly and got on with it. For a calibration finger prick blood test you need to do so like it\u2019s an Olympic event\u2026 as accurately and sterilely as possible (and yes, sterilely is a word\u2026 I\u2019ve just checked). That means you should wash and rinse your hands, dry using a clean paper towel or the like (not the bathroom towel that 100 other people in your office have used that morning) and ensure that test strips are uncontaminated and within date (be honest \u2013 when was the last time you checked the expiry date on your pack of sticks? I also do a few finger pricks on either hand so I know if I have an anomaly, and I use an average if there\u2019s a small disparity. Pre-Soaking And Picking Your Moment Next thing to consider - site trauma. When I insert a sensor I know I am introducing a wound to my body (albeit a managed one). Like any other sort of tissue damage the body responds with the usual mechanics of healing but the inflammation and wound response can make the sensor readings a bit \u2018jumpy\u2019 when first added. This inconsistency of readings is called sensor noise \u2013 where jumpy readings are referred to as \u2018noisy\u2019. Much of this may depend on one\u2019s own personal physiology, but you may be unlucky and find that your body takes a while to settle down - equally one sensor isn\u2019t always the same as the last and you might find that as a one off a sensor takes longer to settle than normal. This is why many Spiker\u2019s \u2018pre-soak\u2019 \u2013 a term for putting on a new sensor before the current one has expired. Putting on a sensor and allowing 12-24 hours for it to calm down before starting it can avoid sensor noise due to site trauma, and means you can skip any warm up time and go right ahead with using Spike. It also gives you more options for picking the moment of starting the new sensor with Spike and making sure that you\u2019re level, stable and in range for that initial calibration. If you\u2019ve not managed to pre-soak, and you\u2019re trying to calibrate immediately after initial insertion of your sensor, you may well be trying to calibrate a jumping target. This may equally be the case if you\u2019ve banged the sensor (the reason why door frames are the nemesis of all Spikers!) or if you use an arm strap/holder that may put undue pressure on the sensor and move the sensor\u2019s filament. Equally, you may find that your sensor gets noisy towards the end of its life \u2013 this seems more prevalent for Dexcom Spikers rather than Libre Spikers, as the Dex sensors just keep on trucking with Spike, whereas Libre has a set cut off at 14.5 days (after which the previous reading just gets repeated\u2026 worth noting in case you think you\u2019re cured!) All these things can affect me picking my prime moment to add a calibration or start a sensor. Variety Is The Spike Of Life Next, and apologies for getting technical, but a degree of understanding is important \u2013 as referred to briefly above some varied calibrations help Spike\u2019s accuracy. So, if for example someone constantly wakes up at 7am and consistently has levels of say 5.0 mmol or 90 mg/dl, they may think that\u2019s a good time to calibrate\u2026 and they\u2019d be right. However, for top notch, grade A, gold star calibration, ideally I try to vary the point within that optimal range for different calibrations. If I consistently calibrate at approximately the same level, the range of points to readings is limited, whereas if I do one accurate calibration (whilst level, stable and in range) at say 4.8 mmol or 86 mg/dl, and then another (whilst level, stable, in range etc., etc.) at say 9 mmol / 162 mg/dl then assuming accuracy of blood glucose meter is a given, that gives Spike a wider range of data points to work the slope confidence from and hopefully remain accurate. See David Burren\u2019s excellent Bionic Wookiee article in the comments below for more information and understanding on this point. Ok, Ok \u2013 Can\u2019t I Just Calibrate Already? Right \u2013 so I\u2019ve met all of the above criteria and I am ready to calibrate. I get my meter reading and just put it into Spike \u2013 job done! Well, almost. Remember that pesky lag we spoke about earlier, well that does need some consideration\u2026 I find that if I continually enter the exact figure every time I calibrate then it just leads to inaccuracy. Just as I know there\u2019s a margin of error, I also need to allow a small amount of difference between what my finger prick says and what Spike says to allow for any slight movement in the levels between now and 15 minutes ago. For this reason, If Spike it off from the meter by less than 0.6 points mmol or 10 points mg/dl, I leave it alone. I only add a calibration if it\u2019s 0.6 mmol / 10 mg/dl or more points off. This works well for me. Not Enough Or Too Much? Last thing I promise, correct calibration regime is important. For me, repeatedly calibrating once or more a day is way, way too often, and sooner or later I know I\u2019ll put in an errant reading and confuse the algorithm. Potentially, I only have to do this once to mess things up. Of course there\u2019s no issue with checking and then if optimal conditions (whilst level, sta.. sorry, I\u2019m beginning to sound like your Mum\u2026 you know when\u2026) are met, and then calibrating if there\u2019s a large disparity. Spike has a calibration alarm which may seem to be gospel in when to calibrate, but I\u2019ve now changed that in favour of my own timing which I find to be optimal. I do the initial calibration, then I check on days 2, 4, 8 and then every 4-5 days until the end of the sensor. I rarely have to add another calibration after day 4 (sometimes day 2!), so this works very well for me, but your diabetes may (and probably will to some degree) vary. Again, the David Burren\u2019s Bionic Wookiee piece below explains in detail why sometimes with calibration, less is more. I\u2019ve Messed It Up\u2026 Now What? So what to do if it all goes wrong? Spike takes and uses every calibration that you give it, so that means that whilst continually recalibrating might dilute any one single calibration that I inputted incorrectly, that is predicated on the others all being correct. So, if say I\u2019ve entered a number of calibrations because of those daily alarms, or I\u2019ve calibrated at a time when I\u2019m rising or falling, out of range, or not stable, then I delete them all. I do this by looking to see when I\u2019m in a stable BG place, going into Settings, Sensor, and Delete All Calibrations. After a few minutes, Spike will make an initial calibration request. I enter the calibration. It\u2019s like resetting Spike and starting over when you do that. I generally gives me a platform to then make my readings more accurate. If it\u2019s just the last calibration that I think was wonky, I can just select that one to delete, which helps combat the occasional instance of \u2018sausage fingers\u2019 whilst typing with the iPhone. Nearly There! I hope that readers will find the above information of what I do to correctly calibrate of use. I\u2019ll put links in the comments to the ISO15197:2013 table, the Bionic Wookiee article and some other places where CGM and diabetic technology generally is blogged about and/or discussed which you may find useful. I\u2019m afraid I am going to turn off comments below this post, as the above is aimed at decreasing the amount of queries on calibration, not notifying me of more. This is an incredible community \u2013 so if the above leaves you scratching your head, and you\u2019ve had a search of this Facebook group and found nothing, then do post and ask \u2013 I\u2019m sure many Spikers will help you. Well done on getting to the end of this post - you deserve a coffee, wine or beer... just don\u2019t calibrate afterwards! (Finally - thanks to Matthew Dutton-Gillett and Chris Ahrend, from who\u2019s posts and messages some of the above has been unashamedly plagiarised). For further reading, please refer to : The Bionic Wookie blog The Diabettech website Katie DiSimone\u2019s See my CGM blog Meter accuracy table :","title":"Calibrating Spike"},{"location":"calibration/#important-about-spike-calibration","text":"It is imperative to read this document in its entirety before installing and using this Spike client. It is also highly recommended to refer to it regularly. A Google doc version is available here , and should be bookmarked for future reference. As Loop users, we understand the importance of accurate data. This rings especially true for calibrations done via the Spike app, whose calibration process is of different nature than those of Dexcom and xDrip, for example. The Dexcom app uses what is called \u201cnative calibration\u201d, which means that it does not calibrate the values in-app. Dexcom sends the user-specified calibration number to the transmitter, who then in turn applies the calibration itself, using Dexcom\u2019s code that resides inside the transmitter. In this case, the Dexcom transmitter algorithm is time-aware, so \u201cpresoaking\u201d a sensor can cause inaccuracies in the algorithm. This, however, does not apply to Spike. While xDrip supports using Dexcom\u2019s in-transmitter algorithm, Spike does not. Spike calibrates in-app and uses raw data collected from the sensor, be it a Dexcom sensor or a Libre sensor. \u201cPresoaking\u201d in Spike therefore has a positive effect rather than a negative one, as Dexcom\u2019s time-aware algorithm does not enter into the Spike equation. Another very important difference to be aware of is that Spike uses every single calibration entered into the app. This effectively means that if you add too many variables into the equation, it gets harder to solve and the results can be messy. Meaning, the more calibrations you enter, the more clogged up the algorithm gets. With other apps, you can \u201ccalibrate your way out of trouble\u201d, as not every single data point is conserved over time. This is not the case with Spike, and attempting to calibrate your way out of a bad situation only aggravates it. What follows is a calibration guide written by one of Spike\u2019s administrators, Robert Bliss. I can personally confirm that this way of calibrating my Libre sensor works for me personally, and as Robert mentions as well, this is what works for him. This is by no means an absolute truth, as everyone is different, but it is important to note, in detail, what the Spike app and its algorithm is expecting from us as users. The permalink to the original post can be found here .","title":"Important : about Spike calibration"},{"location":"calibration/#introduction","text":"So \u2013 kicking things off with a bold statement\u2026 Good calibration is the key to getting Spike to be accurate. Calibrate well, and I find that Spike reflects my levels accurately (remembering that there is always a lag between my blood glucose levels and my interstitial fluid glucose levels that my sensor measures). Calibrate incorrectly and I\u2019ve found I will make things worse rather than better. There is logic as to how and when to calibrate which is discussed below \u2013 yes, this post goes on a bit but as with many things, the detail is important.","title":"Introduction"},{"location":"calibration/#the-cornerstones-of-good-calibration","text":"First, for me there are three cornerstones of good calibration \u2013 to be level, to be stable and to be in range.","title":"The Cornerstones Of Good Calibration"},{"location":"calibration/#level","text":"Taking being level first. I make sure that I\u2019m level when calibrating. That\u2019s not just when Spike\u2019s directional arrow is horizontal - that just reflects the levels for the last 5 minutes ideally one should try to be level for at least 15 minutes to do a proper calibration. Spike can be set to alert the user when this is approximately the case, but I've found for me that when I impose my own stricter criteria of being stable for longer than this (ideally 25-30 minutes) my calibrations are more valid and accurate. The reason for this is that there is a lag between the interstitial fluid that a sensor takes my glucose level from, and blood sugar levels that my finger prick meter reads. I usually take this as approximately 15 minutes, but I\u2019ve read it quoted as anything up to 30 minutes, and I don\u2019t doubt that this lag varies both from person to person, and in different conditions. So, when you view your levels in Spike, you're actually time travelling, in that you\u2019re seeing what your blood sugar levels were approximately 15 minutes or so ago. Other blood glucose monitoring systems use a partial predictive algorithm to try to get around this with varying degrees of success, but (unless you have a DeLorean with a flux capacitor) the lag will always be there. So, how best then to ensure that your blood sugars match your interstitial fluid glucose? Spike works on the basis that if the sensor is showing that you've been level for the last 15 or so minutes (and ideally longer) then you've remained stable too for the time lag between your interstitial fluid and your blood sugar, and therefore the blood and interstitial fluid levels will be aligned (\u2026hopefully). That's why I make sure I\u2019m level when calibrating.","title":"Level"},{"location":"calibration/#stable","text":"However, I may be level, but am I stable? Level reflects the last period of time you can see on your Spike graph, but stability will affect that pesky lag between what Spike shows, and what the blood glucose meter reads from your finger prick test. Think of it like this, you may have been exercising. You may just have eaten. You may have just awoken after lying on your sensor, causing a \u2018compression low\u2019 (a false low reading caused by the pressure applied to the sensor displacing the interstitial fluid that the sensor filament reads). You may just have injected/bolused. You may have just had a hot bath or shower... Hell, you may even just have had a strong black coffee with no carbs but a shed load of caffeine. Your boss may have just told you that they need that report by the end of the day not the end of the week, so your stress levels have gone through the roof (that\u2019s probably why you had the coffee!) You may be on other medications for other conditions that might be just kicking in. You may feel upset or angry about something. You may have just poured yourself a beer or a glass of wine (you deserve it after finishing that report!) You may be coming down with a bug. All these things affect blood sugars... as do a ton of other criteria. Whilst some of these are unavoidable, I try to my best to minimise them before I calibrate - so I don't eat, bolus, inject, exercise, crack open a beer... and I try to hide from my boss. This is why it's important that even if I\u2019m level, I need to minimise anything that could affect levels prior to calibrating and ensure I\u2019m stable","title":"Stable"},{"location":"calibration/#in-range","text":"Last one of the calibration trinity \u2013 being in optimal range. As a diabetic, I may be high or low at various points. That's not necessarily an issue in the context of calibration \u2013 if still in range it can be a good thing (more on that later), however when in hypo, and when higher than approximate optimal range (so say approximately under 4mmol or 72mg/dl, or over 11 mmol, or 198 mg/dl) I know my interstitial sensors can become less accurate. I believe this is why the advice from Dexcom and Abbott is to always confirm a high or low reading with a finger prick test, and why it's important to resist the temptation to calibrate when you or your child has a low or high and Spike hasn't reflected that in its readings (not to mention that sugars are probably not level then either). So for me it makes sense that whilst within range is the optimal time to calibrate.","title":"In Range"},{"location":"calibration/#but-what-if-im-not-level-stable-or-in-range","text":"Well, ideally I wait until I am \u2013 however when I start a new sensor isn\u2019t always at a moment of my choosing, and the initial calibration Spike will ask is mandatory \u2013 Spike won\u2019t work without it. What to do here? This is where Miguel has given Spikers a reset option that I frequently use. If I\u2019m not level stable and in range, I do what I need to do to get the sensor going and add to Spike the calibration from my blood test meter as best I can. Then, later on when I do meet the trinity of conditions referred to above, in Spike I go to Menu > Sensor and delete all calibrations. That resets everything, and means that Spike will prompt me to input another calibration. I enter that and hopefully that gets me back on the right path.","title":"But What If I\u2019m Not Level, Stable Or In Range?"},{"location":"calibration/#calibration-when-how-and-what-with","text":"Ok \u2013 so that explains the level, stable and in range thing\u2026. but specifically when and how should one calibrate? Ideally assuming I\u2019m level, stable and in range, and If I\u2019ve pre-soaked a sensor then I\u2019m good to go? Yes, probably - but there are a few more things to consider\u2026.","title":"Calibration\u2026 When, How And What With?"},{"location":"calibration/#all-blood-glucose-meters-are-not-born-equal","text":"Consider what blood glucose meter you\u2019re using and its accuracy? Unfortunately, even those meters that claim a high degree of accuracy have a margin of error. For those of us who used meters for years before CGM, we were very used to never questioning meter accuracy as we\u2019ve always taken it for red that it\u2019s bang on, but in reality this isn\u2019t the case. Some meters are better that others, and I\u2019ve done my research as to what meters have a smaller margin of error (I use a Contour Next One). Before making a choice, I check out what various meter\u2019s MARD is (MARD = Mean Absolute Relative Difference). Whilst this isn\u2019t perfect, I used it to determine where in the range of accuracy my potential meter sits. I\u2019ve added a table in the comments below which was passed on to me by a dia-buddy, and was originally posted on the MM FB group. This shows the range of accuracy used in meeting ISO standard ISO15197:2013 and it tells its own tale. Remember that any inaccuracy entered from a meter will be introduced to Spike, so make it your business to make sure your meter\u2019s a good one!","title":"All Blood Glucose Meters Are Not Born Equal"},{"location":"calibration/#why-not-just-use-dex-receiver-or-libre-reader-librelink-app-to-calibrate-with","text":"If I don\u2019t have my blood glucose meter to hand\u2026 that\u2019s ok though because I have my Dexcom receiver and/or Libre reader / Librelink app \u2013 why not just use that? I\u2019ll stop you there. Whatever you do, don\u2019t use a device that already uses an algorithm, to then calibrate Spike\u2019s algorithm. Why not? Because you\u2019re introducing potentially a greater margin of error into the method of aligning your levels, and as Spike uses line confidence (or slope confidence) you\u2019re effectively introducing a compounded inaccurate algorithm output into the proceedings\u2026 or put more simply, you\u2019re potentially multiplying the margin of error by two! The Libre is partially predictive in the way it calculates your sugar levels. In order to get around the lag it takes the last readings and predicts where it thinks you\u2019ll be in 15 or so minutes time. Libre also has a temperature gauge and adjusts out for example a high from where you have a hot shower for 5 minutes. The Dex systems also applies its own algorithm to values, and again both of these systems both have a different way of calculating glucose levels than that Spike uses, as well as their own margin of error. When you add this native Dex/Libre algorithm to that already in Spike you usually make things less accurate, not more so. Simply put, if you\u2019ve ever played the game \u2018Chinese Whispers\u2019 then you\u2019ll understand that offsetting information at each step can result in a mess at the end. Chinese Whispers is a kid\u2019s game here in the UK where one child whispers something into the next one\u2019s ear, and that goes down a chain of however many children until the last one has to say it out loud. The idea is that the same word or phrase goes all the way along, but invariably someone mishears, or decides to amend the whisper slightly with hilarious consequences\u2026 In this case, adding in Libre or Dex algorithm is like adding my nephew into the middle of that line of children \u2013 there\u2019s a chance it\u2019ll be fine, but my money would be on that he\u2019ll change things to affect the outcome!","title":"Why Not Just Use Dex #Receiver Or Libre Reader / Librelink App To Calibrate With?"},{"location":"calibration/#olympic-finger-pricking","text":"Then there\u2019s the actual process of finger pricking - again, for those who did this pre CGM, were very used to doing finger pricking on the fly and it\u2019s sometimes difficult to get out of that habit... yes, I know what the medical professionals told us about how to finger prick, and we all nod along sagely, but in reality life wasn\u2019t like that and if any of you are like me, we just checked quickly and got on with it. For a calibration finger prick blood test you need to do so like it\u2019s an Olympic event\u2026 as accurately and sterilely as possible (and yes, sterilely is a word\u2026 I\u2019ve just checked). That means you should wash and rinse your hands, dry using a clean paper towel or the like (not the bathroom towel that 100 other people in your office have used that morning) and ensure that test strips are uncontaminated and within date (be honest \u2013 when was the last time you checked the expiry date on your pack of sticks? I also do a few finger pricks on either hand so I know if I have an anomaly, and I use an average if there\u2019s a small disparity.","title":"Olympic Finger Pricking"},{"location":"calibration/#pre-soaking-and-picking-your-moment","text":"Next thing to consider - site trauma. When I insert a sensor I know I am introducing a wound to my body (albeit a managed one). Like any other sort of tissue damage the body responds with the usual mechanics of healing but the inflammation and wound response can make the sensor readings a bit \u2018jumpy\u2019 when first added. This inconsistency of readings is called sensor noise \u2013 where jumpy readings are referred to as \u2018noisy\u2019. Much of this may depend on one\u2019s own personal physiology, but you may be unlucky and find that your body takes a while to settle down - equally one sensor isn\u2019t always the same as the last and you might find that as a one off a sensor takes longer to settle than normal. This is why many Spiker\u2019s \u2018pre-soak\u2019 \u2013 a term for putting on a new sensor before the current one has expired. Putting on a sensor and allowing 12-24 hours for it to calm down before starting it can avoid sensor noise due to site trauma, and means you can skip any warm up time and go right ahead with using Spike. It also gives you more options for picking the moment of starting the new sensor with Spike and making sure that you\u2019re level, stable and in range for that initial calibration. If you\u2019ve not managed to pre-soak, and you\u2019re trying to calibrate immediately after initial insertion of your sensor, you may well be trying to calibrate a jumping target. This may equally be the case if you\u2019ve banged the sensor (the reason why door frames are the nemesis of all Spikers!) or if you use an arm strap/holder that may put undue pressure on the sensor and move the sensor\u2019s filament. Equally, you may find that your sensor gets noisy towards the end of its life \u2013 this seems more prevalent for Dexcom Spikers rather than Libre Spikers, as the Dex sensors just keep on trucking with Spike, whereas Libre has a set cut off at 14.5 days (after which the previous reading just gets repeated\u2026 worth noting in case you think you\u2019re cured!) All these things can affect me picking my prime moment to add a calibration or start a sensor.","title":"Pre-Soaking And Picking Your Moment"},{"location":"calibration/#variety-is-the-spike-of-life","text":"Next, and apologies for getting technical, but a degree of understanding is important \u2013 as referred to briefly above some varied calibrations help Spike\u2019s accuracy. So, if for example someone constantly wakes up at 7am and consistently has levels of say 5.0 mmol or 90 mg/dl, they may think that\u2019s a good time to calibrate\u2026 and they\u2019d be right. However, for top notch, grade A, gold star calibration, ideally I try to vary the point within that optimal range for different calibrations. If I consistently calibrate at approximately the same level, the range of points to readings is limited, whereas if I do one accurate calibration (whilst level, stable and in range) at say 4.8 mmol or 86 mg/dl, and then another (whilst level, stable, in range etc., etc.) at say 9 mmol / 162 mg/dl then assuming accuracy of blood glucose meter is a given, that gives Spike a wider range of data points to work the slope confidence from and hopefully remain accurate. See David Burren\u2019s excellent Bionic Wookiee article in the comments below for more information and understanding on this point.","title":"Variety Is The Spike Of Life"},{"location":"calibration/#ok-ok-cant-i-just-calibrate-already","text":"Right \u2013 so I\u2019ve met all of the above criteria and I am ready to calibrate. I get my meter reading and just put it into Spike \u2013 job done! Well, almost. Remember that pesky lag we spoke about earlier, well that does need some consideration\u2026 I find that if I continually enter the exact figure every time I calibrate then it just leads to inaccuracy. Just as I know there\u2019s a margin of error, I also need to allow a small amount of difference between what my finger prick says and what Spike says to allow for any slight movement in the levels between now and 15 minutes ago. For this reason, If Spike it off from the meter by less than 0.6 points mmol or 10 points mg/dl, I leave it alone. I only add a calibration if it\u2019s 0.6 mmol / 10 mg/dl or more points off. This works well for me.","title":"Ok, Ok \u2013 Can\u2019t I Just Calibrate Already?"},{"location":"calibration/#not-enough-or-too-much","text":"Last thing I promise, correct calibration regime is important. For me, repeatedly calibrating once or more a day is way, way too often, and sooner or later I know I\u2019ll put in an errant reading and confuse the algorithm. Potentially, I only have to do this once to mess things up. Of course there\u2019s no issue with checking and then if optimal conditions (whilst level, sta.. sorry, I\u2019m beginning to sound like your Mum\u2026 you know when\u2026) are met, and then calibrating if there\u2019s a large disparity. Spike has a calibration alarm which may seem to be gospel in when to calibrate, but I\u2019ve now changed that in favour of my own timing which I find to be optimal. I do the initial calibration, then I check on days 2, 4, 8 and then every 4-5 days until the end of the sensor. I rarely have to add another calibration after day 4 (sometimes day 2!), so this works very well for me, but your diabetes may (and probably will to some degree) vary. Again, the David Burren\u2019s Bionic Wookiee piece below explains in detail why sometimes with calibration, less is more.","title":"Not Enough Or Too Much?"},{"location":"calibration/#ive-messed-it-up-now-what","text":"So what to do if it all goes wrong? Spike takes and uses every calibration that you give it, so that means that whilst continually recalibrating might dilute any one single calibration that I inputted incorrectly, that is predicated on the others all being correct. So, if say I\u2019ve entered a number of calibrations because of those daily alarms, or I\u2019ve calibrated at a time when I\u2019m rising or falling, out of range, or not stable, then I delete them all. I do this by looking to see when I\u2019m in a stable BG place, going into Settings, Sensor, and Delete All Calibrations. After a few minutes, Spike will make an initial calibration request. I enter the calibration. It\u2019s like resetting Spike and starting over when you do that. I generally gives me a platform to then make my readings more accurate. If it\u2019s just the last calibration that I think was wonky, I can just select that one to delete, which helps combat the occasional instance of \u2018sausage fingers\u2019 whilst typing with the iPhone.","title":"I\u2019ve Messed It Up\u2026 Now What?"},{"location":"calibration/#nearly-there","text":"I hope that readers will find the above information of what I do to correctly calibrate of use. I\u2019ll put links in the comments to the ISO15197:2013 table, the Bionic Wookiee article and some other places where CGM and diabetic technology generally is blogged about and/or discussed which you may find useful. I\u2019m afraid I am going to turn off comments below this post, as the above is aimed at decreasing the amount of queries on calibration, not notifying me of more. This is an incredible community \u2013 so if the above leaves you scratching your head, and you\u2019ve had a search of this Facebook group and found nothing, then do post and ask \u2013 I\u2019m sure many Spikers will help you. Well done on getting to the end of this post - you deserve a coffee, wine or beer... just don\u2019t calibrate afterwards! (Finally - thanks to Matthew Dutton-Gillett and Chris Ahrend, from who\u2019s posts and messages some of the above has been unashamedly plagiarised).","title":"Nearly There!"},{"location":"calibration/#for-further-reading-please-refer-to","text":"The Bionic Wookie blog The Diabettech website Katie DiSimone\u2019s See my CGM blog Meter accuracy table :","title":"For further reading, please refer to :"},{"location":"resources/","text":"Resources Here's a quick list of resources that I've personally found very helpful along the way. It's by no means extensive, and I'll add to it as I find things. Git The Git website The Progit free e-book . Careful with this one, it's a 500-something page PDF. It's the most extensive guide you'll ever find, but a hefty download if you've got a slow internet connection. You can also find an online version here if you don't want to download it. GitHub The GitHub website Swift The Swift website Building apps I'm personally still looking for other good resources available on this, but the YouTube channel Code With Chris has been really fantastic for me so far. He has lots of tutorials, from building apps in Xcode to learning Swift.","title":"Resources"},{"location":"resources/#resources","text":"Here's a quick list of resources that I've personally found very helpful along the way. It's by no means extensive, and I'll add to it as I find things.","title":"Resources"},{"location":"resources/#git","text":"The Git website The Progit free e-book . Careful with this one, it's a 500-something page PDF. It's the most extensive guide you'll ever find, but a hefty download if you've got a slow internet connection. You can also find an online version here if you don't want to download it.","title":"Git"},{"location":"resources/#github","text":"The GitHub website","title":"GitHub"},{"location":"resources/#swift","text":"The Swift website","title":"Swift"},{"location":"resources/#building-apps","text":"I'm personally still looking for other good resources available on this, but the YouTube channel Code With Chris has been really fantastic for me so far. He has lots of tutorials, from building apps in Xcode to learning Swift.","title":"Building apps"}]}